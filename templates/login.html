<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ScalpIQ â€” Login</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;0,700;1,500&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --cream:   #fdf8f3;
      --cream2:  #f7efe4;
      --cream3:  #efe3d4;
      --coral:   #e8714a;
      --coral2:  #c95535;
      --plum:    #3d1f5e;
      --plum2:   #2a1340;
      --sage:    #4a7c6f;
      --border:  rgba(61,31,94,0.1);
      --text:    #1a0e2e;
      --muted:   #7a6b8a;
      --label:   #5a4d6b;
      --shadow:  0 8px 40px rgba(61,31,94,0.12);
    }

    html, body {
      height: 100%;
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: var(--cream);
      color: var(--text);
      overflow-x: hidden;
    }

    /* â”€â”€ Split layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page {
      min-height: 100vh;
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    @media (max-width: 768px) {
      .page { grid-template-columns: 1fr; }
      .left-panel { display: none; }
    }

    /* â”€â”€ Left decorative panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .left-panel {
      background: linear-gradient(145deg, var(--plum2) 0%, var(--plum) 50%, #5b2d8a 100%);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 52px 56px;
      position: relative;
      overflow: hidden;
    }

    .left-panel::before {
      content: '';
      position: absolute;
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(232,113,74,0.25), transparent 65%);
      top: -120px; right: -120px;
      border-radius: 50%;
    }

    .left-panel::after {
      content: '';
      position: absolute;
      width: 350px; height: 350px;
      background: radial-gradient(circle, rgba(255,255,255,0.04), transparent 65%);
      bottom: -80px; left: -80px;
      border-radius: 50%;
    }

    .panel-logo {
      display: flex;
      align-items: center;
      gap: 14px;
      position: relative;
      z-index: 1;
    }

    .panel-logo-mark {
      width: 46px; height: 46px;
      background: linear-gradient(135deg, var(--coral), #f5a87c);
      border-radius: 14px;
      display: flex; align-items: center; justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 16px rgba(232,113,74,0.4);
    }

    .panel-logo-name {
      font-family: 'Playfair Display', serif;
      font-size: 1.6em;
      font-weight: 700;
      color: #fff;
    }

    .panel-logo-name span { color: var(--coral); }

    .panel-content {
      position: relative;
      z-index: 1;
    }

    .panel-content h2 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.8em, 3vw, 2.6em);
      font-weight: 700;
      color: #fff;
      line-height: 1.2;
      margin-bottom: 20px;
    }

    .panel-content h2 em {
      font-style: italic;
      color: var(--coral);
    }

    .panel-content p {
      color: rgba(255,255,255,0.65);
      font-size: 0.95em;
      line-height: 1.75;
      max-width: 340px;
    }

    .panel-features {
      margin-top: 40px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .panel-feature {
      display: flex;
      align-items: center;
      gap: 14px;
      color: rgba(255,255,255,0.8);
      font-size: 0.88em;
      font-weight: 500;
    }

    .feat-icon {
      width: 36px; height: 36px;
      background: rgba(255,255,255,0.08);
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
      border: 1px solid rgba(255,255,255,0.12);
    }

    .panel-footer {
      color: rgba(255,255,255,0.35);
      font-size: 0.75em;
      position: relative;
      z-index: 1;
    }

    /* â”€â”€ Right form panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .right-panel {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 24px;
      background: var(--cream);
    }

    .form-box {
      width: 100%;
      max-width: 420px;
    }

    .form-header { margin-bottom: 36px; }

    .form-eyebrow {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.7em;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--coral);
      font-weight: 500;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-eyebrow::before {
      content: '';
      width: 18px; height: 2px;
      background: var(--coral);
      border-radius: 2px;
    }

    .form-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2em;
      font-weight: 700;
      color: var(--plum);
      line-height: 1.15;
    }

    .form-header p {
      margin-top: 10px;
      color: var(--muted);
      font-size: 0.9em;
      line-height: 1.6;
    }

    .form-header p a {
      color: var(--coral);
      font-weight: 600;
      text-decoration: none;
    }

    .form-header p a:hover { text-decoration: underline; }

    /* Fields */
    .field { display: flex; flex-direction: column; gap: 8px; margin-bottom: 18px; }

    .field label {
      font-size: 0.82em;
      font-weight: 600;
      color: var(--label);
    }

    .input-wrap { position: relative; }

    .input-icon {
      position: absolute;
      left: 14px; top: 50%;
      transform: translateY(-50%);
      font-size: 16px;
      pointer-events: none;
      opacity: 0.5;
    }

    .field input {
      width: 100%;
      background: #fff;
      border: 1.5px solid var(--cream3);
      border-radius: 12px;
      padding: 13px 16px 13px 42px;
      font-size: 0.95em;
      color: var(--text);
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-weight: 500;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .field input:focus {
      outline: none;
      border-color: var(--coral);
      box-shadow: 0 0 0 4px rgba(232,113,74,0.1);
    }

    .field input::placeholder { color: #bba8cc; font-weight: 400; }

    /* Password toggle */
    .pw-toggle {
      position: absolute;
      right: 14px; top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      opacity: 0.45;
      transition: opacity 0.2s;
      padding: 4px;
    }

    .pw-toggle:hover { opacity: 0.8; }

    /* Row */
    .field-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 22px;
    }

    .check-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.83em;
      color: var(--label);
      font-weight: 500;
      cursor: pointer;
    }

    .check-label input[type=checkbox] {
      width: 16px; height: 16px;
      border: 1.5px solid var(--cream3);
      border-radius: 4px;
      accent-color: var(--coral);
      cursor: pointer;
    }

    .forgot-link {
      font-size: 0.83em;
      color: var(--coral);
      font-weight: 600;
      text-decoration: none;
    }

    .forgot-link:hover { text-decoration: underline; }

    /* Submit btn */
    .btn-submit {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, var(--coral), var(--plum));
      color: #fff;
      border: none;
      border-radius: 12px;
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 1em;
      font-weight: 700;
      cursor: pointer;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: opacity 0.2s, transform 0.15s, box-shadow 0.2s;
      box-shadow: 0 6px 24px rgba(232,113,74,0.35);
      margin-bottom: 24px;
    }

    .btn-submit:hover:not(:disabled) {
      opacity: 0.92;
      transform: translateY(-2px);
      box-shadow: 0 10px 32px rgba(232,113,74,0.4);
    }

    .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* Divider */
    .divider {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 24px;
    }

    .divider::before, .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--cream3);
    }

    .divider span { font-size: 0.78em; color: var(--muted); white-space: nowrap; font-weight: 500; }

    /* Social btns */
    .social-btns { display: flex; gap: 12px; margin-bottom: 28px; }

    .btn-social {
      flex: 1;
      padding: 12px;
      background: #fff;
      border: 1.5px solid var(--cream3);
      border-radius: 12px;
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 0.85em;
      font-weight: 600;
      color: var(--label);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: border-color 0.2s, box-shadow 0.2s, transform 0.15s;
    }

    .btn-social:hover {
      border-color: var(--coral);
      box-shadow: 0 4px 12px rgba(232,113,74,0.12);
      transform: translateY(-1px);
    }

    /* Error/success */
    .alert {
      border-radius: 10px;
      padding: 13px 16px;
      font-size: 0.87em;
      font-weight: 500;
      margin-bottom: 20px;
      display: none;
      align-items: center;
      gap: 10px;
    }

    .alert.visible { display: flex; }
    .alert.error   { background: #fff5f5; border: 1.5px solid #fecaca; color: #b91c1c; }
    .alert.success { background: #f0fdf4; border: 1.5px solid #bbf7d0; color: #15803d; }

    /* Spinner inside button */
    .btn-spinner {
      width: 18px; height: 18px;
      border: 2px solid rgba(255,255,255,0.4);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      display: none;
    }

    .btn-spinner.visible { display: block; }

    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .form-box { animation: fadeIn 0.5s ease both; }
  </style>
</head>
<body>
<div class="page">

  <!-- Left Panel -->
  <div class="left-panel">
    <div class="panel-logo">
      <div class="panel-logo-mark">ğŸ§¬</div>
      <div class="panel-logo-name">Scalp<span>IQ</span></div>
    </div>

    <div class="panel-content">
      <h2>Your Scalp,<br><em>Understood.</em></h2>
      <p>Get AI-powered analysis of your scalp health with personalised recommendations â€” in under 60 seconds.</p>
      <div class="panel-features">
        <div class="panel-feature">
          <div class="feat-icon">âš¡</div>
          Instant ML-powered severity prediction
        </div>
        <div class="panel-feature">
          <div class="feat-icon">ğŸ”</div>
          SHAP explainability â€” know exactly why
        </div>
        <div class="panel-feature">
          <div class="feat-icon">ğŸ“Š</div>
          Track your progress over time
        </div>
        <div class="panel-feature">
          <div class="feat-icon">ğŸ¯</div>
          Personalised treatment recommendations
        </div>
      </div>
    </div>

    <div class="panel-footer">Â© 2025 ScalpIQ. All rights reserved.</div>
  </div>

  <!-- Right Panel -->
  <div class="right-panel">
    <div class="form-box">
      <div class="form-header">
        <div class="form-eyebrow">Welcome back</div>
        <h1>Sign in to<br>ScalpIQ</h1>
        <p>Don't have an account? <a href="/signup">Create one free</a></p>
      </div>

      <div class="alert error" id="alertError">
        <span>âš </span><span id="alertErrorMsg"></span>
      </div>
      <div class="alert success" id="alertSuccess">
        <span>âœ“</span><span id="alertSuccessMsg"></span>
      </div>

      <form id="loginForm" novalidate>
        <div class="field">
          <label for="email">Email address</label>
          <div class="input-wrap">
            <span class="input-icon">âœ‰</span>
            <input type="email" id="email" name="email" placeholder="you@example.com" required autocomplete="email" />
          </div>
        </div>

        <div class="field">
          <label for="password">Password</label>
          <div class="input-wrap">
            <span class="input-icon">ğŸ”’</span>
            <input type="password" id="password" name="password" placeholder="Your password" required autocomplete="current-password" />
            <button type="button" class="pw-toggle" id="pwToggle" aria-label="Toggle password">ğŸ‘</button>
          </div>
        </div>

        <div class="field-row">
          <label class="check-label">
            <input type="checkbox" name="remember" />
            Remember me
          </label>
          <a href="/forgot-password" class="forgot-link">Forgot password?</a>
        </div>

        <button type="submit" class="btn-submit" id="submitBtn">
          <div class="btn-spinner" id="btnSpinner"></div>
          <span id="btnText">Sign In</span>
        </button>
      </form>

  </div>

</div>

<script>
  /* Password toggle */
  document.getElementById('pwToggle').addEventListener('click', () => {
    const input = document.getElementById('password');
    input.type = input.type === 'password' ? 'text' : 'password';
  });

  /* Login form */
  document.getElementById('loginForm').addEventListener('submit', async e => {
    e.preventDefault();

    const btn     = document.getElementById('submitBtn');
    const spinner = document.getElementById('btnSpinner');
    const btnText = document.getElementById('btnText');
    const errAlert = document.getElementById('alertError');
    const errMsg   = document.getElementById('alertErrorMsg');
    const okAlert  = document.getElementById('alertSuccess');
    const okMsg    = document.getElementById('alertSuccessMsg');

    errAlert.classList.remove('visible');
    okAlert.classList.remove('visible');
    btn.disabled = true;
    spinner.classList.add('visible');
    btnText.textContent = 'Signing inâ€¦';

    const data = {
      email:    document.getElementById('email').value.trim(),
      password: document.getElementById('password').value
    };

    try {
      const res  = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const json = await res.json();

      if (json.success) {
        okMsg.textContent = `Welcome back! Redirectingâ€¦`;
        okAlert.classList.add('visible');
        setTimeout(() => { window.location.href = json.redirect || '/'; }, 800);
      } else {
        errMsg.textContent = json.error || 'Login failed.';
        errAlert.classList.add('visible');
        btn.disabled = false;
        spinner.classList.remove('visible');
        btnText.textContent = 'Sign In';
      }
    } catch (err) {
      errMsg.textContent = 'Network error. Please try again.';
      errAlert.classList.add('visible');
      btn.disabled = false;
      spinner.classList.remove('visible');
      btnText.textContent = 'Sign In';
    }
  });
</script>
</body>
</html>